{"remainingRequest":"/home/yallakora/front/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/yallakora/front/front/src/components/VideoPlayer.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/yallakora/front/front/src/components/VideoPlayer.vue","mtime":1651758698333},{"path":"/home/yallakora/front/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/yallakora/front/front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAndmlkZW8uanMvZGlzdC92aWRlby1qcy5jc3MnCmltcG9ydCBfdmlkZW9qcyBmcm9tICd2aWRlby5qcycKY29uc3QgdmlkZW9qcyA9IHdpbmRvdy52aWRlb2pzIHx8IF92aWRlb2pzCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1ZpZGVvUGxheWVyJywKICBwcm9wczogewogICAgY3Jvc3NPcmlnaW46IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnJwogICAgfSwKICAgIHBsYXlzaW5saW5lOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgY3VzdG9tRXZlbnROYW1lOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ3N0YXRlY2hhbmdlZCcKICAgIH0sCiAgICBvcHRpb25zOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBldmVudHM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6ICgpID0+IFtdCiAgICB9LAogICAgZ2xvYmFsT3B0aW9uczogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6ICgpID0+ICh7CiAgICAgICAgLy8gZG9jdW1lbnQ6IGh0dHBzOi8vZG9jcy52aWRlb2pzLmNvbS90dXRvcmlhbC1vcHRpb25zLmh0bWwjZmx1aWQKICAgICAgICBhdXRvcGxheTogdHJ1ZSwKICAgICAgICBjb250cm9sczogdHJ1ZSwKICAgICAgICBsYW5ndWFnZTogJ3poJywKICAgICAgICBpbmFjdGl2aXR5VGltZW91dDogMCwKICAgICAgICBwcmVsb2FkOiAnYXV0bycsCiAgICAgICAgZmx1aWQ6IGZhbHNlLAogICAgICAgIHRlY2hPcmRlcjogWydodG1sNSddLAogICAgICAgIHBsdWdpbnM6IHt9CiAgICAgIH0pCiAgICB9LAogICAgZ2xvYmFsRXZlbnRzOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0OiAoKSA9PiBbXQogICAgfSwKICAgIHRyYWNrTGlzdDogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogKCkgPT4gW10KICAgIH0KICB9LAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgcGxheWVyOiBudWxsLAogICAgICByZXNldGVkOiB0cnVlCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0aWFsaXplOiBmdW5jdGlvbiAoKSB7CiAgICAgIGNvbnN0IHNlbGYgPSB0aGlzCiAgICAgIGNvbnN0IHZpZGVvT2JqID0gdGhpcy4kcmVmcy52aWRlbwogICAgICAvLyB2aWRlb2pzIG9wdGlvbnMKICAgICAgY29uc3QgdmlkZW9PcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5nbG9iYWxPcHRpb25zLCB0aGlzLm9wdGlvbnMpCiAgICAgIC8vIGlvcyBmdWxsc2NyZWVuCiAgICAgIGlmICh0aGlzLnBsYXlzaW5saW5lKSB7CiAgICAgICAgdmlkZW9PYmouc2V0QXR0cmlidXRlKCdwbGF5c2lubGluZScsIHRoaXMucGxheXNpbmxpbmUpCiAgICAgICAgdmlkZW9PYmouc2V0QXR0cmlidXRlKCd3ZWJraXQtcGxheXNpbmxpbmUnLCB0aGlzLnBsYXlzaW5saW5lKQogICAgICAgIHZpZGVvT2JqLnNldEF0dHJpYnV0ZSgneDUtcGxheXNpbmxpbmUnLCB0aGlzLnBsYXlzaW5saW5lKQogICAgICAgIHZpZGVvT2JqLnNldEF0dHJpYnV0ZSgneDUtdmlkZW8tcGxheWVyLXR5cGUnLCAnaDUnKQogICAgICAgIHZpZGVvT2JqLnNldEF0dHJpYnV0ZSgneDUtdmlkZW8tcGxheWVyLWZ1bGxzY3JlZW4nLCBmYWxzZSkKICAgICAgfQogICAgICAvLyBjcm9zcyBvcmlnaW4KICAgICAgaWYgKHRoaXMuY3Jvc3NPcmlnaW4gIT09ICcnKSB7CiAgICAgICAgdmlkZW9PYmouY3Jvc3NPcmlnaW4gPSB0aGlzLmNyb3NzT3JpZ2luCiAgICAgICAgdmlkZW9PYmouc2V0QXR0cmlidXRlKCdjcm9zc09yaWdpbicsIHRoaXMuY3Jvc3NPcmlnaW4pCiAgICAgIH0KICAgICAgLy8gYXZvaWQgZXJyb3IgIlZJREVPSlM6IEVSUk9SOiBVbmFibGUgdG8gZmluZCBwbHVnaW46IF9fb2JfXyIKICAgICAgaWYgKHZpZGVvT3B0aW9ucy5wbHVnaW5zKSB7CiAgICAgICAgZGVsZXRlIHZpZGVvT3B0aW9ucy5wbHVnaW5zLl9fb2JfXwogICAgICB9CiAgICAgIC8vIGVtaXQgZXZlbnQKICAgICAgY29uc3QgZW1pdFBsYXllclN0YXRlID0gKGV2ZW50LCB2YWx1ZSkgPT4gewogICAgICAgIGlmIChldmVudCkgewogICAgICAgICAgdGhpcy4kZW1pdChldmVudCwgdGhpcy5wbGF5ZXIpCiAgICAgICAgfQogICAgICAgIGlmICh2YWx1ZSkgewogICAgICAgICAgdGhpcy4kZW1pdCh0aGlzLmN1c3RvbUV2ZW50TmFtZSwgeyBbZXZlbnRdOiB2YWx1ZSB9KQogICAgICAgIH0KICAgICAgfQogICAgICAvLyBwbGF5ZXIKICAgICAgdGhpcy5wbGF5ZXIgPSB2aWRlb2pzKHZpZGVvT2JqLCB2aWRlb09wdGlvbnMsIGZ1bmN0aW9uICgpIHsKICAgICAgICAvLyBldmVudHMKICAgICAgICBjb25zdCBERUZBVUxUX0VWRU5UUyA9IFsKICAgICAgICAgICdsb2FkZWRkYXRhJywKICAgICAgICAgICdjYW5wbGF5JywKICAgICAgICAgICdjYW5wbGF5dGhyb3VnaCcsCiAgICAgICAgICAncGxheScsCiAgICAgICAgICAncGF1c2UnLAogICAgICAgICAgJ3dhaXRpbmcnLAogICAgICAgICAgJ3BsYXlpbmcnLAogICAgICAgICAgJ2VuZGVkJywKICAgICAgICAgICdlcnJvcicKICAgICAgICBdCiAgICAgICAgY29uc3QgZXZlbnRzID0gREVGQVVMVF9FVkVOVFMuY29uY2F0KHNlbGYuZXZlbnRzKS5jb25jYXQoCiAgICAgICAgICBzZWxmLmdsb2JhbEV2ZW50cwogICAgICAgICkKCiAgICAgICAgLy8gd2F0Y2ggZXZlbnRzCiAgICAgICAgY29uc3Qgb25FZEV2ZW50cyA9IHt9CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBldmVudHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGlmICgKICAgICAgICAgICAgdHlwZW9mIGV2ZW50c1tpXSA9PT0gJ3N0cmluZycgJiYKICAgICAgICAgICAgICBvbkVkRXZlbnRzW2V2ZW50c1tpXV0gPT09IHVuZGVmaW5lZAogICAgICAgICAgKSB7CiAgICAgICAgICAgIChldmVudCA9PiB7CiAgICAgICAgICAgICAgb25FZEV2ZW50c1tldmVudF0gPSBudWxsCiAgICAgICAgICAgICAgdGhpcy5vbihldmVudCwgKCkgPT4gewogICAgICAgICAgICAgICAgZW1pdFBsYXllclN0YXRlKGV2ZW50LCB0cnVlKQogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0pKGV2ZW50c1tpXSkKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLy8gcGxheWVyIHJlYWRpZWQKICAgICAgICBzZWxmLiRlbWl0KCdyZWFkeScsIHRoaXMpCiAgICAgIH0pCiAgICB9LAogICAgZGlzcG9zZSAoY2FsbGJhY2spIHsKICAgICAgaWYgKHRoaXMucGxheWVyICYmIHRoaXMucGxheWVyLmRpc3Bvc2UpIHsKICAgICAgICBpZiAodGhpcy5wbGF5ZXIudGVjaE5hbWVfICE9PSAnRmxhc2gnKSB7CiAgICAgICAgICB0aGlzLnBsYXllci5wYXVzZSAmJiB0aGlzLnBsYXllci5wYXVzZSgpCiAgICAgICAgfQogICAgICAgIHRoaXMucGxheWVyLmRpc3Bvc2UoKQogICAgICAgIHRoaXMucGxheWVyID0gbnVsbAogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgIHRoaXMucmVzZXRlZCA9IGZhbHNlCiAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgICAgIHRoaXMucmVzZXRlZCA9IHRydWUKICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKCkKICAgICAgICAgICAgfSkKICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgICAgfQogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIG9wdGlvbnM6IHsKICAgICAgZGVlcDogdHJ1ZSwKICAgICAgaGFuZGxlciAob3B0aW9ucywgb2xkT3B0aW9ucykgewogICAgICAgIHRoaXMuZGlzcG9zZSgoKSA9PiB7CiAgICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLnNvdXJjZXMgJiYgb3B0aW9ucy5zb3VyY2VzLmxlbmd0aCkgewogICAgICAgICAgICB0aGlzLmluaXRpYWxpemUoKQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0KICAgIH0KICB9LAogIG1vdW50ZWQgKCkgewogICAgaWYgKCF0aGlzLnBsYXllcikgewogICAgICB0aGlzLmluaXRpYWxpemUoKQogICAgfQogIH0sCiAgYmVmb3JlRGVzdHJveSAoKSB7CiAgICBpZiAodGhpcy5wbGF5ZXIpIHsKICAgICAgdGhpcy5kaXNwb3NlKCkKICAgIH0KICB9Cn0KCg=="},{"version":3,"sources":["VideoPlayer.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAiBA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"VideoPlayer.vue","sourceRoot":"node_modules/vue-videojs7/src/components","sourcesContent":["<template>\n  <div  v-if=\"reseted\">\n    <video class=\"video-js\" ref=\"video\">\n      <track v-for=\"(crtTrack,index) in trackList\"\n             :key=\"index\"\n             :kind=\"crtTrack.kind\" :label=\"crtTrack.label\"\n             :src=\"crtTrack.src\" :srcLang=\"crtTrack.srcLang\"\n             :default=\"crtTrack.default\"/>\n      <p class=\"vjs-no-js\">\n        To view this video please enable JavaScript, and consider upgrading to a web browser that\n        <a href=\"https://videojs.com/html5-video-support/\" target=\"_blank\">supports HTML5 video</a>\n      </p>\n    </video>\n  </div>\n</template>\n\n<script>\nimport 'video.js/dist/video-js.css'\nimport _videojs from 'video.js'\nconst videojs = window.videojs || _videojs\n\nexport default {\n  name: 'VideoPlayer',\n  props: {\n    crossOrigin: {\n      type: String,\n      default: ''\n    },\n    playsinline: {\n      type: Boolean,\n      default: false\n    },\n    customEventName: {\n      type: String,\n      default: 'statechanged'\n    },\n    options: {\n      type: Object,\n      required: true\n    },\n    events: {\n      type: Array,\n      default: () => []\n    },\n    globalOptions: {\n      type: Object,\n      default: () => ({\n        // document: https://docs.videojs.com/tutorial-options.html#fluid\n        autoplay: true,\n        controls: true,\n        language: 'zh',\n        inactivityTimeout: 0,\n        preload: 'auto',\n        fluid: false,\n        techOrder: ['html5'],\n        plugins: {}\n      })\n    },\n    globalEvents: {\n      type: Array,\n      default: () => []\n    },\n    trackList: {\n      type: Array,\n      default: () => []\n    }\n  },\n  data () {\n    return {\n      player: null,\n      reseted: true\n    }\n  },\n  methods: {\n    initialize: function () {\n      const self = this\n      const videoObj = this.$refs.video\n      // videojs options\n      const videoOptions = Object.assign({}, this.globalOptions, this.options)\n      // ios fullscreen\n      if (this.playsinline) {\n        videoObj.setAttribute('playsinline', this.playsinline)\n        videoObj.setAttribute('webkit-playsinline', this.playsinline)\n        videoObj.setAttribute('x5-playsinline', this.playsinline)\n        videoObj.setAttribute('x5-video-player-type', 'h5')\n        videoObj.setAttribute('x5-video-player-fullscreen', false)\n      }\n      // cross origin\n      if (this.crossOrigin !== '') {\n        videoObj.crossOrigin = this.crossOrigin\n        videoObj.setAttribute('crossOrigin', this.crossOrigin)\n      }\n      // avoid error \"VIDEOJS: ERROR: Unable to find plugin: __ob__\"\n      if (videoOptions.plugins) {\n        delete videoOptions.plugins.__ob__\n      }\n      // emit event\n      const emitPlayerState = (event, value) => {\n        if (event) {\n          this.$emit(event, this.player)\n        }\n        if (value) {\n          this.$emit(this.customEventName, { [event]: value })\n        }\n      }\n      // player\n      this.player = videojs(videoObj, videoOptions, function () {\n        // events\n        const DEFAULT_EVENTS = [\n          'loadeddata',\n          'canplay',\n          'canplaythrough',\n          'play',\n          'pause',\n          'waiting',\n          'playing',\n          'ended',\n          'error'\n        ]\n        const events = DEFAULT_EVENTS.concat(self.events).concat(\n          self.globalEvents\n        )\n\n        // watch events\n        const onEdEvents = {}\n        for (let i = 0; i < events.length; i++) {\n          if (\n            typeof events[i] === 'string' &&\n              onEdEvents[events[i]] === undefined\n          ) {\n            (event => {\n              onEdEvents[event] = null\n              this.on(event, () => {\n                emitPlayerState(event, true)\n              })\n            })(events[i])\n          }\n        }\n        // player readied\n        self.$emit('ready', this)\n      })\n    },\n    dispose (callback) {\n      if (this.player && this.player.dispose) {\n        if (this.player.techName_ !== 'Flash') {\n          this.player.pause && this.player.pause()\n        }\n        this.player.dispose()\n        this.player = null\n        this.$nextTick(() => {\n          this.reseted = false\n          this.$nextTick(() => {\n            this.reseted = true\n            this.$nextTick(() => {\n              callback && callback()\n            })\n          })\n        })\n      }\n    }\n  },\n  watch: {\n    options: {\n      deep: true,\n      handler (options, oldOptions) {\n        this.dispose(() => {\n          if (options && options.sources && options.sources.length) {\n            this.initialize()\n          }\n        })\n      }\n    }\n  },\n  mounted () {\n    if (!this.player) {\n      this.initialize()\n    }\n  },\n  beforeDestroy () {\n    if (this.player) {\n      this.dispose()\n    }\n  }\n}\n\n</script>\n\n<style scoped>\n\n</style>\n"]}]}