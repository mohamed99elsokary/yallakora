{"remainingRequest":"D:\\Freelance\\yallakora\\front\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Freelance\\yallakora\\front\\front\\src\\components\\VideoPlayer.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Freelance\\yallakora\\front\\front\\src\\components\\VideoPlayer.vue","mtime":1658238591454},{"path":"D:\\Freelance\\yallakora\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Freelance\\yallakora\\front\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgJ3ZpZGVvLmpzL2Rpc3QvdmlkZW8tanMuY3NzJw0KaW1wb3J0IF92aWRlb2pzIGZyb20gJ3ZpZGVvLmpzJw0KY29uc3QgdmlkZW9qcyA9IHdpbmRvdy52aWRlb2pzIHx8IF92aWRlb2pzDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ1ZpZGVvUGxheWVyJywNCiAgcHJvcHM6IHsNCiAgICBjcm9zc09yaWdpbjogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogJ2Fub255bW91cycNCiAgICAgIC8vIGRlZmF1bHQ6ICd1c2UtY3JlZGVudGlhbHMnDQogICAgfSwNCiAgICBwbGF5c2lubGluZTogew0KICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgIGRlZmF1bHQ6IGZhbHNlDQogICAgfSwNCiAgICBjdXN0b21FdmVudE5hbWU6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIGRlZmF1bHQ6ICdzdGF0ZWNoYW5nZWQnDQogICAgfSwNCiAgICBvcHRpb25zOiB7DQogICAgICB0eXBlOiBPYmplY3QsDQogICAgICByZXF1aXJlZDogdHJ1ZQ0KICAgIH0sDQogICAgZXZlbnRzOiB7DQogICAgICB0eXBlOiBBcnJheSwNCiAgICAgIGRlZmF1bHQ6ICgpID0+IFtdDQogICAgfSwNCiAgICBnbG9iYWxPcHRpb25zOiB7DQogICAgICB0eXBlOiBPYmplY3QsDQogICAgICBkZWZhdWx0OiAoKSA9PiAoew0KICAgICAgICAvLyBkb2N1bWVudDogaHR0cHM6Ly9kb2NzLnZpZGVvanMuY29tL3R1dG9yaWFsLW9wdGlvbnMuaHRtbCNmbHVpZA0KICAgICAgICBhdXRvcGxheTogdHJ1ZSwNCiAgICAgICAgY29udHJvbHM6IHRydWUsDQogICAgICAgIGxhbmd1YWdlOiAnemgnLA0KICAgICAgICBpbmFjdGl2aXR5VGltZW91dDogMCwNCiAgICAgICAgcHJlbG9hZDogJ2F1dG8nLA0KICAgICAgICBmbHVpZDogZmFsc2UsDQogICAgICAgIHRlY2hPcmRlcjogWydodG1sNSddLA0KICAgICAgICBwbHVnaW5zOiB7fQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGdsb2JhbEV2ZW50czogew0KICAgICAgdHlwZTogQXJyYXksDQogICAgICBkZWZhdWx0OiAoKSA9PiBbXQ0KICAgIH0sDQogICAgdHJhY2tMaXN0OiB7DQogICAgICB0eXBlOiBBcnJheSwNCiAgICAgIGRlZmF1bHQ6ICgpID0+IFtdDQogICAgfQ0KICB9LA0KICBkYXRhICgpIHsNCiAgICByZXR1cm4gew0KICAgICAgcGxheWVyOiBudWxsLA0KICAgICAgcmVzZXRlZDogdHJ1ZQ0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uICgpIHsNCiAgICAgIGNvbnN0IHNlbGYgPSB0aGlzDQogICAgICBjb25zdCB2aWRlb09iaiA9IHRoaXMuJHJlZnMudmlkZW8NCiAgICAgIC8vIHZpZGVvanMgb3B0aW9ucw0KICAgICAgY29uc3QgdmlkZW9PcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5nbG9iYWxPcHRpb25zLCB0aGlzLm9wdGlvbnMpDQogICAgICAvLyBpb3MgZnVsbHNjcmVlbg0KICAgICAgaWYgKHRoaXMucGxheXNpbmxpbmUpIHsNCiAgICAgICAgdmlkZW9PYmouc2V0QXR0cmlidXRlKCdwbGF5c2lubGluZScsIHRoaXMucGxheXNpbmxpbmUpDQogICAgICAgIHZpZGVvT2JqLnNldEF0dHJpYnV0ZSgnd2Via2l0LXBsYXlzaW5saW5lJywgdGhpcy5wbGF5c2lubGluZSkNCiAgICAgICAgdmlkZW9PYmouc2V0QXR0cmlidXRlKCd4NS1wbGF5c2lubGluZScsIHRoaXMucGxheXNpbmxpbmUpDQogICAgICAgIHZpZGVvT2JqLnNldEF0dHJpYnV0ZSgneDUtdmlkZW8tcGxheWVyLXR5cGUnLCAnaDUnKQ0KICAgICAgICB2aWRlb09iai5zZXRBdHRyaWJ1dGUoJ3g1LXZpZGVvLXBsYXllci1mdWxsc2NyZWVuJywgZmFsc2UpDQogICAgICB9DQogICAgICAvLyBjcm9zcyBvcmlnaW4NCiAgICAgIGlmICh0aGlzLmNyb3NzT3JpZ2luICE9PSAnJykgew0KICAgICAgICB2aWRlb09iai5jcm9zc09yaWdpbiA9IHRoaXMuY3Jvc3NPcmlnaW4NCiAgICAgICAgdmlkZW9PYmouc2V0QXR0cmlidXRlKCdjcm9zc09yaWdpbicsIHRoaXMuY3Jvc3NPcmlnaW4pDQogICAgICAgIGNvbnNvbGUubG9nKCdjcm9zc09yaWdpbiBjcm9zc09yaWdpbiBjcm9zc09yaWdpbicpOw0KICAgICAgfSANCiAgICAgIC8vIGVsc2Ugew0KICAgICAgLy8gICBjb25zb2xlLmxvZygnY3Jvc3NPcmlnaW4yIGNyb3NzT3JpZ2luMiBjcm9zc09yaWdpbjInKTsNCiAgICAgICAgDQogICAgICAvLyB9DQogICAgICAvLyBhdm9pZCBlcnJvciAiVklERU9KUzogRVJST1I6IFVuYWJsZSB0byBmaW5kIHBsdWdpbjogX19vYl9fIg0KICAgICAgaWYgKHZpZGVvT3B0aW9ucy5wbHVnaW5zKSB7DQogICAgICAgIGRlbGV0ZSB2aWRlb09wdGlvbnMucGx1Z2lucy5fX29iX18NCiAgICAgIH0NCiAgICAgIC8vIGVtaXQgZXZlbnQNCiAgICAgIGNvbnN0IGVtaXRQbGF5ZXJTdGF0ZSA9IChldmVudCwgdmFsdWUpID0+IHsNCiAgICAgICAgaWYgKGV2ZW50KSB7DQogICAgICAgICAgdGhpcy4kZW1pdChldmVudCwgdGhpcy5wbGF5ZXIpDQogICAgICAgIH0NCiAgICAgICAgaWYgKHZhbHVlKSB7DQogICAgICAgICAgdGhpcy4kZW1pdCh0aGlzLmN1c3RvbUV2ZW50TmFtZSwgeyBbZXZlbnRdOiB2YWx1ZSB9KQ0KICAgICAgICB9DQogICAgICB9DQogICAgICAvLyBwbGF5ZXINCiAgICAgIHRoaXMucGxheWVyID0gdmlkZW9qcyh2aWRlb09iaiwgdmlkZW9PcHRpb25zLCBmdW5jdGlvbiAoKSB7DQogICAgICAgIC8vIGV2ZW50cw0KICAgICAgICBjb25zdCBERUZBVUxUX0VWRU5UUyA9IFsNCiAgICAgICAgICAnbG9hZGVkZGF0YScsDQogICAgICAgICAgJ2NhbnBsYXknLA0KICAgICAgICAgICdjYW5wbGF5dGhyb3VnaCcsDQogICAgICAgICAgJ3BsYXknLA0KICAgICAgICAgICdwYXVzZScsDQogICAgICAgICAgJ3dhaXRpbmcnLA0KICAgICAgICAgICdwbGF5aW5nJywNCiAgICAgICAgICAnZW5kZWQnLA0KICAgICAgICAgICdlcnJvcicNCiAgICAgICAgXQ0KICAgICAgICBjb25zdCBldmVudHMgPSBERUZBVUxUX0VWRU5UUy5jb25jYXQoc2VsZi5ldmVudHMpLmNvbmNhdCgNCiAgICAgICAgICBzZWxmLmdsb2JhbEV2ZW50cw0KICAgICAgICApDQoNCiAgICAgICAgLy8gd2F0Y2ggZXZlbnRzDQogICAgICAgIGNvbnN0IG9uRWRFdmVudHMgPSB7fQ0KICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGV2ZW50cy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgIGlmICgNCiAgICAgICAgICAgIHR5cGVvZiBldmVudHNbaV0gPT09ICdzdHJpbmcnICYmDQogICAgICAgICAgICAgIG9uRWRFdmVudHNbZXZlbnRzW2ldXSA9PT0gdW5kZWZpbmVkDQogICAgICAgICAgKSB7DQogICAgICAgICAgICAoZXZlbnQgPT4gew0KICAgICAgICAgICAgICBvbkVkRXZlbnRzW2V2ZW50XSA9IG51bGwNCiAgICAgICAgICAgICAgdGhpcy5vbihldmVudCwgKCkgPT4gew0KICAgICAgICAgICAgICAgIGVtaXRQbGF5ZXJTdGF0ZShldmVudCwgdHJ1ZSkNCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0pKGV2ZW50c1tpXSkNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgLy8gcGxheWVyIHJlYWRpZWQNCiAgICAgICAgc2VsZi4kZW1pdCgncmVhZHknLCB0aGlzKQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGRpc3Bvc2UgKGNhbGxiYWNrKSB7DQogICAgICBpZiAodGhpcy5wbGF5ZXIgJiYgdGhpcy5wbGF5ZXIuZGlzcG9zZSkgew0KICAgICAgICBpZiAodGhpcy5wbGF5ZXIudGVjaE5hbWVfICE9PSAnRmxhc2gnKSB7DQogICAgICAgICAgdGhpcy5wbGF5ZXIucGF1c2UgJiYgdGhpcy5wbGF5ZXIucGF1c2UoKQ0KICAgICAgICB9DQogICAgICAgIHRoaXMucGxheWVyLmRpc3Bvc2UoKQ0KICAgICAgICB0aGlzLnBsYXllciA9IG51bGwNCiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgIHRoaXMucmVzZXRlZCA9IGZhbHNlDQogICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgICAgdGhpcy5yZXNldGVkID0gdHJ1ZQ0KICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjaygpDQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0pDQogICAgICAgIH0pDQogICAgICB9DQogICAgfQ0KICB9LA0KICB3YXRjaDogew0KICAgIG9wdGlvbnM6IHsNCiAgICAgIGRlZXA6IHRydWUsDQogICAgICBoYW5kbGVyIChvcHRpb25zLCBvbGRPcHRpb25zKSB7DQogICAgICAgIHRoaXMuZGlzcG9zZSgoKSA9PiB7DQogICAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5zb3VyY2VzICYmIG9wdGlvbnMuc291cmNlcy5sZW5ndGgpIHsNCiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpDQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgbW91bnRlZCAoKSB7DQogICAgaWYgKCF0aGlzLnBsYXllcikgew0KICAgICAgdGhpcy5pbml0aWFsaXplKCkNCiAgICB9DQogIH0sDQogIGJlZm9yZURlc3Ryb3kgKCkgew0KICAgIGlmICh0aGlzLnBsYXllcikgew0KICAgICAgdGhpcy5kaXNwb3NlKCkNCiAgICB9DQogIH0NCn0NCg0K"},{"version":3,"sources":["VideoPlayer.vue"],"names":[],"mappings":";AAiBA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"VideoPlayer.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div  v-if=\"reseted\">\r\n    <video class=\"video-js\" ref=\"video\">\r\n      <track v-for=\"(crtTrack,index) in trackList\"\r\n             :key=\"index\"\r\n             :kind=\"crtTrack.kind\" :label=\"crtTrack.label\"\r\n             :src=\"crtTrack.src\" :srcLang=\"crtTrack.srcLang\"\r\n             :default=\"crtTrack.default\"/>\r\n      <p class=\"vjs-no-js\">\r\n        To view this video please enable JavaScript, and consider upgrading to a web browser that\r\n        <a href=\"https://videojs.com/html5-video-support/\" target=\"_blank\">supports HTML5 video</a>\r\n      </p>\r\n    </video>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport 'video.js/dist/video-js.css'\r\nimport _videojs from 'video.js'\r\nconst videojs = window.videojs || _videojs\r\n\r\nexport default {\r\n  name: 'VideoPlayer',\r\n  props: {\r\n    crossOrigin: {\r\n      type: String,\r\n      default: 'anonymous'\r\n      // default: 'use-credentials'\r\n    },\r\n    playsinline: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    customEventName: {\r\n      type: String,\r\n      default: 'statechanged'\r\n    },\r\n    options: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    events: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    globalOptions: {\r\n      type: Object,\r\n      default: () => ({\r\n        // document: https://docs.videojs.com/tutorial-options.html#fluid\r\n        autoplay: true,\r\n        controls: true,\r\n        language: 'zh',\r\n        inactivityTimeout: 0,\r\n        preload: 'auto',\r\n        fluid: false,\r\n        techOrder: ['html5'],\r\n        plugins: {}\r\n      })\r\n    },\r\n    globalEvents: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    trackList: {\r\n      type: Array,\r\n      default: () => []\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      player: null,\r\n      reseted: true\r\n    }\r\n  },\r\n  methods: {\r\n    initialize: function () {\r\n      const self = this\r\n      const videoObj = this.$refs.video\r\n      // videojs options\r\n      const videoOptions = Object.assign({}, this.globalOptions, this.options)\r\n      // ios fullscreen\r\n      if (this.playsinline) {\r\n        videoObj.setAttribute('playsinline', this.playsinline)\r\n        videoObj.setAttribute('webkit-playsinline', this.playsinline)\r\n        videoObj.setAttribute('x5-playsinline', this.playsinline)\r\n        videoObj.setAttribute('x5-video-player-type', 'h5')\r\n        videoObj.setAttribute('x5-video-player-fullscreen', false)\r\n      }\r\n      // cross origin\r\n      if (this.crossOrigin !== '') {\r\n        videoObj.crossOrigin = this.crossOrigin\r\n        videoObj.setAttribute('crossOrigin', this.crossOrigin)\r\n        console.log('crossOrigin crossOrigin crossOrigin');\r\n      } \r\n      // else {\r\n      //   console.log('crossOrigin2 crossOrigin2 crossOrigin2');\r\n        \r\n      // }\r\n      // avoid error \"VIDEOJS: ERROR: Unable to find plugin: __ob__\"\r\n      if (videoOptions.plugins) {\r\n        delete videoOptions.plugins.__ob__\r\n      }\r\n      // emit event\r\n      const emitPlayerState = (event, value) => {\r\n        if (event) {\r\n          this.$emit(event, this.player)\r\n        }\r\n        if (value) {\r\n          this.$emit(this.customEventName, { [event]: value })\r\n        }\r\n      }\r\n      // player\r\n      this.player = videojs(videoObj, videoOptions, function () {\r\n        // events\r\n        const DEFAULT_EVENTS = [\r\n          'loadeddata',\r\n          'canplay',\r\n          'canplaythrough',\r\n          'play',\r\n          'pause',\r\n          'waiting',\r\n          'playing',\r\n          'ended',\r\n          'error'\r\n        ]\r\n        const events = DEFAULT_EVENTS.concat(self.events).concat(\r\n          self.globalEvents\r\n        )\r\n\r\n        // watch events\r\n        const onEdEvents = {}\r\n        for (let i = 0; i < events.length; i++) {\r\n          if (\r\n            typeof events[i] === 'string' &&\r\n              onEdEvents[events[i]] === undefined\r\n          ) {\r\n            (event => {\r\n              onEdEvents[event] = null\r\n              this.on(event, () => {\r\n                emitPlayerState(event, true)\r\n              })\r\n            })(events[i])\r\n          }\r\n        }\r\n        // player readied\r\n        self.$emit('ready', this)\r\n      })\r\n    },\r\n    dispose (callback) {\r\n      if (this.player && this.player.dispose) {\r\n        if (this.player.techName_ !== 'Flash') {\r\n          this.player.pause && this.player.pause()\r\n        }\r\n        this.player.dispose()\r\n        this.player = null\r\n        this.$nextTick(() => {\r\n          this.reseted = false\r\n          this.$nextTick(() => {\r\n            this.reseted = true\r\n            this.$nextTick(() => {\r\n              callback && callback()\r\n            })\r\n          })\r\n        })\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    options: {\r\n      deep: true,\r\n      handler (options, oldOptions) {\r\n        this.dispose(() => {\r\n          if (options && options.sources && options.sources.length) {\r\n            this.initialize()\r\n          }\r\n        })\r\n      }\r\n    }\r\n  },\r\n  mounted () {\r\n    if (!this.player) {\r\n      this.initialize()\r\n    }\r\n  },\r\n  beforeDestroy () {\r\n    if (this.player) {\r\n      this.dispose()\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"]}]}